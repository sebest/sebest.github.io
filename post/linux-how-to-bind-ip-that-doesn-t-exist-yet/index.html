
<!DOCTYPE html>
<html lang="en-us">
<head>

  
  <meta charset="UTF-8">
  <title>
    Linux: How to bind IP that doesn&#39;t exist (yet). | ☁️  Sebest&#39;s Nuage ☁️
  </title>


  
  <meta name="viewport" content="width=device-width,user-scalable=no,maximum-scale=1,initial-scale=1">

  
  <link rel="canonical" href="https://sebest.github.io/post/linux-how-to-bind-ip-that-doesn-t-exist-yet/"/>

  
  <link rel="stylesheet" href="/css/sanitize.css">
  <link rel="stylesheet" href="/css/responsive.css">
  <link rel="stylesheet" href="/css/highlight_monokai.css">
  <link rel="stylesheet" href="/css/theme.css">
  <link rel="stylesheet" href="/css/custom.css">
  
  
  <link href="https://sebest.github.io/index.xml" rel="alternate" type="application/rss+xml" title="☁️  Sebest&#39;s Nuage ☁️" />
  <link href="https://sebest.github.io/index.xml" rel="feed" type="application/rss+xml" title="☁️  Sebest&#39;s Nuage ☁️" />

  
  <script type="text/javascript">var switchTo5x=true;</script>
  <script type="text/javascript" src="https://ws.sharethis.com/button/buttons.js"></script>
  <script type="text/javascript">stLight.options({publisher: "2b9fffc6-b3fe-4988-a0ef-4f9dcce98eaa", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script>


</head>



<body>
<div class="container">

  
  <header role="banner">
    <div class="row gutters">
      <div id="site-title" class="col span_6">
        <h1><a href="https://sebest.github.io/">☁️  Sebest&#39;s Nuage ☁️</a></h1>
        <h2>The DevOps corner.</h2>
      </div>
      <div id="social" class="col span_6">
        <ul>
          <li><a href="https://twitter.com/sebest" target="_blank">Twitter</a></li>
          <li><a href="https://facebook.com/tsebes" target="_blank">Facebook</a></li>
          <li><a href="https://github.com/sebest" target="_blank">GitHub</a></li>
          
        </ul>
      </div>
    </div>
  </header>


  
  <main id="single" role="main">
    <div class="article-header">
      <h1>Linux: How to bind IP that doesn&#39;t exist (yet).</h1>
      <div class="meta">
        May 25, 2010 &nbsp;
        
      </div>
    </div>
    <article>
      <p>This tip is really usefull if you use virtual ips.</p>

<p>Imagine you are using keepalived + haproxy on your loadbalancers in active/active mode.</p>

<p>You have 2 vips one is on the first load balancerm the other on the second. Now in your haproxy.cfg you have to bind these ips, the probem is that one of the vips is not on the current loadbalancer, so haproxy will refuse to start with the following error: <i>Starting proxy appli1-rewrite: cannot bind socket</i>.</p>

<p>The common solution is to listen on <i>0.0.0.0</i>, but it not always practical on wanted, especially if you want to have another server using the same port but on another ip, or if you only want to listen on internal interfaces.</p>

<p>The solution is a sysctl, that will allow any software to bind any ip even if it&rsquo;s not up yet:</p>

<pre><code>sysctl -w net.ipv4.ip_nonlocal_bind=1
</code></pre>

<p>You should put this in <strong>/etc/sysctl.conf</strong> to make it permanent.</p>

      
      
      <div id="share-this" class="col span_10">
        <span class='st_twitter_large' displayText='Tweet'></span>
        <span class='st_facebook_large' displayText='Facebook'></span>
        <span class='st_googleplus_large' displayText='Google +'></span>
        <span class='st_pocket_large' displayText='Pocket'></span>
        <span class='st_sharethis_large' displayText='ShareThis'></span>
        <span class='st_email_large' displayText='Email'></span>  
      </div>
    </article>
    
 <aside><div id="disqus_thread"></div></aside> 

<script type="text/javascript">
     
    var disqus_shortname = 'sebest';

     
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  </main>
  
  <nav class="pagination">
    
      <span class="previous">&larr; <a href="https://sebest.github.io/post/how-to-easily-package-python-softwares-for-ubuntu/" rel="prev">How to easily package python softwares for ubuntu</a></span>
    
    
      <span class="next"><a href="https://sebest.github.io/post/a-quick-md5sum-equivalent-in-python/" rel="next">A quick md5sum equivalent in python.</a> &rarr;</span>
    
  </nav>


  
  <footer role="contentinfo">
    <div style="text-align:center;">
      
      Written by Sébastien Estienne
    </div>
  </footer>


</div>

<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-68482802-1', 'auto');
	ga('send', 'pageview');
</script>

</body>
</html>

